import{_ as N,r as S,o as q,u as B,s as H,a as x,b as R,c as j,d as L,e as b,f as a,w as o,F as $,t as z,g as V,p as A,h as G,i as X}from"./index-9941fe8a.js";import{E as Y,l as J,a as y,r as K,b as O,c as Q,d as Z,e as ee,f as te}from"./el-notification-24886acb.js";import{S as ae,P as se,W as oe,T as re,a as ne,V as le,b as ue,M as ie}from"./three.module-b680911b.js";const de=function(c){const _=new ae,f=new se(90,window.innerWidth/window.innerHeight,.1,1e3);f.position.set(0,0,5.5);let d=new oe({antialias:!0});d.setSize(window.innerWidth,window.innerHeight),document.body.querySelector(c).appendChild(d.domElement);const g=new re,p=g.load("/build.jpg"),u=g.load("/build_depth.jpg"),m=new ne(22.7,11),n=new le,w=new ue({uniforms:{uTime:{value:0},uTexture:{value:p},uDepthTexture:{value:u},uMouse:{value:n}},vertexShader:`
    varying vec2 vUv;
    void main() {
      vUv = uv;
      gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
    }
  `,fragmentShader:`
    uniform sampler2D uTexture;
    uniform sampler2D uDepthTexture;
    uniform vec2 uMouse;
    varying vec2 vUv;
    uniform float uTime;
    void main() {
      vec4 color = texture2D(uTexture, vUv);
      vec4 depth = texture2D(uDepthTexture, vUv);
      float depthValue = depth.r;
      float x = vUv.x + (uMouse.x+sin(uTime))*0.01*depthValue;
      float y = vUv.y + (uMouse.y+cos(uTime))*0.01*depthValue;
      vec4 newColor = texture2D(uTexture, vec2(x, y));
      gl_FragColor = newColor;
    }
  `}),F=new ie(m,w);_.add(F),requestAnimationFrame(function v(){w.uniforms.uMouse.value=n,w.uniforms.uTime.value=performance.now()/1e3,f.aspect=window.innerWidth/window.innerHeight,f.updateProjectionMatrix(),d.setSize(window.innerWidth,window.innerHeight),requestAnimationFrame(v),d.render(_,f)}),window.addEventListener("mousemove",v=>{n.x=v.clientX/window.innerWidth*2-1,n.y=-(v.clientY/window.innerHeight)*2+1})};const pe=c=>(A("data-v-c8f7f410"),c=c(),G(),c),me=pe(()=>b("div",{class:"scene"},null,-1)),ce={class:"box"},fe={__name:"login",setup(c){const _=S({base3d:{}});q(()=>{_.base3d=new de(".scene")});const f=B(),{token:d,value2:g}=H(f),p=x(!1),u=x(!1),m=x(!1),n=x();R(()=>{w()});const w=()=>{if(!g.value)return document.querySelector("html").className="dark";document.querySelector("html").className=""},F=(s,e,t)=>{if(e==="")t(new Error("Please input the username"));else{if(r.username!==""&&!n)return n.value.validateField("User",()=>null);t()}},v=(s,e,t)=>{if(e==="")t(new Error("Please input the password"));else{if(r.password!==""){if(r.password.length<6)return t(new Error("The password is too short. Procedure"));if(!n.value)return n.value.validateField("Pass",()=>null)}t()}},P=(s,e,t)=>{e===""?t(new Error("Please input the password again")):e!==r.password?t(new Error("Two inputs don't match!")):t()},r=S({username:"",password:"",passc:""}),U=S({username:[{validator:F,trigger:"blur"}],password:[{validator:v,trigger:"blur"}],passc:[{validator:P,trigger:"blur"}]}),C=s=>{p.value?(p.value=!1,s.resetFields()):s.validate(e=>{if(e){u.value=!0;const t={username:r.username,password:r.password};J(t).then(l=>{E(l,k)}).catch(l=>{u.value=!1,y({title:"Error",message:l,type:"error"})})}s.resetFields()})},D=s=>{p.value?s.validate(e=>{if(e){m.value=!0;const t={username:r.username,password:r.password};K(t).then(l=>{E(l),m.value=!1}).catch(l=>{y({title:"Error",message:l,type:"error"}),m.value=!1})}s.resetFields()}):(p.value=!0,s.resetFields())},W=s=>{s.resetFields()},E=(s,e)=>{s.data.statu!==0?(y({title:"Error",message:s.data.message,type:"error"}),u.value=!1,m.value=!1):(e&&e(s),y({title:"Success",message:s.data.message,type:"success"}),u.value=!1)},k=s=>{d.value=s.data.token,d.value&&(console.log(1),X.push({path:"/home"})),document.readyState==="complete"&&(u.value=!1)};return(s,e)=>{const t=O,l=Q,h=Z,T=ee,M=te,I=Y;return j(),L($,null,[me,b("div",ce,[a(I,{ref_key:"ruleFormRef",ref:n,model:r,"status-icon":"",rules:U,"label-width":"120px",class:"demo-ruleForm"},{default:o(()=>[a(M,null,{default:o(()=>[a(t,{span:24},{default:o(()=>[b("h1",null,z(p.value?"注册":"登录"),1)]),_:1}),a(t,{span:24},{default:o(()=>[a(h,{label:"用户:",prop:"username"},{default:o(()=>[a(l,{modelValue:r.username,"onUpdate:modelValue":e[0]||(e[0]=i=>r.username=i),type:"text"},null,8,["modelValue"])]),_:1})]),_:1}),a(t,{span:24},{default:o(()=>[a(h,{label:"密码:",prop:"password"},{default:o(()=>[a(l,{modelValue:r.password,"onUpdate:modelValue":e[1]||(e[1]=i=>r.password=i),modelModifiers:{trim:!0},type:"password",autocomplete:"off","show-password":"",minlength:"6"},null,8,["modelValue"])]),_:1})]),_:1}),a(t,{span:24},{default:o(()=>[a(h,{label:"重复密码:",prop:"passc"},{default:o(()=>[a(l,{modelValue:r.passc,"onUpdate:modelValue":e[2]||(e[2]=i=>r.passc=i),modelModifiers:{trim:!0},type:"password",autocomplete:"off","show-password":"",minlength:"6"},null,8,["modelValue"])]),_:1})]),_:1}),a(t,{span:24},{default:o(()=>[a(h,null,{default:o(()=>[a(M,{gutter:20},{default:o(()=>[a(t,{span:8,xs:24},{default:o(()=>[a(T,{type:"primary",onClick:e[3]||(e[3]=i=>C(n.value)),loading:u.value},{default:o(()=>[V("登录")]),_:1},8,["loading"])]),_:1}),a(t,{span:8,xs:24},{default:o(()=>[a(T,{type:"success",onClick:e[4]||(e[4]=i=>D(n.value)),loading:m.value},{default:o(()=>[V("注册")]),_:1},8,["loading"])]),_:1}),a(t,{span:8,xs:24},{default:o(()=>[a(T,{type:"warning",onClick:e[5]||(e[5]=i=>W(n.value))},{default:o(()=>[V("清空")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])])],64)}}},ge=N(fe,[["__scopeId","data-v-c8f7f410"]]);export{ge as default};
